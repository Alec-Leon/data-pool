Попытка от скуки вынести датапул на GitHub Pages

Оригинал: https://coda.io/@a-leon/data-pool-0-95-coda

## Установка и запуск
1. Установить [Node.js](https://nodejs.org/en) (версия 18+). После установки можно проверить командами в терминале `node -v` и `npm -v` (вывод версии).
2. Скачать репозиторий: `git clone https://github.com/Eugen-Maximov/data-pool.git`
3. В директории проекта в терминале выполнить `npm install` (установка зависимостей) и `npm install --save-dev @11ty/eleventy` (установка движка генерации сайта)
4. Для запуска также в терминале выполнить команду `npm run serve` после чего запущенный сайт можно будет увидеть в http://localhost:8080/data-pool/. При внесении изменений все будет автоматически обновляться
5. Для сборки изменений `npm run build` (сгенерирует из .md файлов файлы .html и остальные рабочие в директорию /docs)

## Структура проекта
```
.
└── data-pool/
    ├── .github/
    │   └── workflows/
    │       └── demploy.yml                 # файл конфига пайплайна GitHub
    ├── app/
    │   └── search.js                       # скрипты
    ├── content/                            # контент страниц в формате .md
    │   ├── chrome/
    │   │   ├── borgs.md
    │   │   └── implants.md
    │   ├── index.md                        # главная страница в .md
    │   └── search-index.11ty.js            # файл сбора ключей для поиска
    ├── css/
    │   └── main.css                        # стили проекта
    ├── data/
    │   └── price.json                      # глобальные переменные
    ├── docs/
    │   ├── search-index.json               # сгенерированные ключи поиска                              
    │   └── chrome/
    │       └── index.html                  # сгенерированные html файлы
    ├── images/                              
    │   ├── chrome/
    │   │   └── implant.png                 # изображение для конкретной страницы
    │   └── logo.png                        # основные изображения
    ├── templates/                           
    │   ├── includes/
    │   │   └── sidebar.njk                 # верстка сайдбара
    │   └── layouts/
    │       └── base.njk                    # верстка основных страниц
    ├── .eleventy.js                        # конфиг генератора
    └── package.json                        # конфиг проекта
```
Для наполнения уже готовых страниц контентом достаточно найти нужные раздел и страницу в /data-pool/content/ и просто, как в md редакторе ее заполнить, если запустить проект, то в локалхосте можно видеть изменения в реалтайме.

## Структура страницы:
Для примера используется страница ./content/equipment/weapons.md
### Шапка
```
---
title: Оружейный Магазин
layout: base.njk
keywords: [ "оружие", "пистолет", "пп", "пулемет", "снайперка", "ROF", "боеприпас", "пуля", "пули", "арбалет", "смартган" ]
---
```
Должна быть у каждой страницы. Визуально не отображается. 
- `title` - просто название
- `layout` - указывает на шаблон страницы из templates/. Почти всегда использовать `base.njk`
- `keywords` - ключевые слова, по которым будет работать поиск по сайту. В виде массива строк, то есть строго в формате `["ключ", ...]`. Если на странице не будет этого параметра, то страница никак не будет индексироваться в поиске (даже по заголовку). Может быть полезно для страниц типа "Поддержка" или "Главная". Если оставить массив пустым `[]`, то страничка будет в поиске, но только по заголовку.

### Страница
Сама страница наполняется, как обычный Markdown файл:
```
---

## Боеприпасы, гранаты, взрывчатка

Боеприпасы бывают разных видов: Патроны (для Пистолета, для Тяжёлого и Очень Тяжелого Пистолета, для Дробовика, и для
Винтовок), Дробь, Стрелы, Гранаты и Ракеты. Каждый тип оружия требует собственный вид боеприпасов.<br>
**Гранаты и Ракеты продаются поштучно. Остальные Боеприпасы продаются по 10 штук.**
```
#### Изображения
Отдельно заполняются изображения.  
Если достаточно просто вставить картинку, чтобы она была отдельно, то используем `<img src="{{ '/путь/до/картинки.png' | url }}" alt="Название картинки" class="image-container" />`.  
Важно соблюдать структуру папок изображений, дабы не создавать мусор. Изображения для страницы weapons должны лежать по тому же пути, в директории images. Пример:
```
./content/equipment/weapons.md - страница Оружия
./images/content/equipment/weapons/grenade-zone.png - картинка, которая используется на странице Оружия
```
Если хочется сделать обтекание страницы текстом, то используется похожий блок:
```
<div class="image-container image-left">
  <img src="{{ '/images/путь/до/изображения.png' | url }}" alt="Имя картинки">
  <div class="text">
    <p>
    ТЕКСТ
    </p>
  </div>
</div>
```
В строке `<div class="image-container image-left">` указывается, в каком месте страницы расположится изображение: `image-left`, `image-right` и `image-center`.
#### Глобальные переменные
Чтобы не писать один и тот же текст по 100500 раз можно использовать ключи формата `{{ fileName.keyName }}`.<br>
В таком случае при сборке проекта вместо ключа будет подставлено его значение.<br>
Файлы с ключами лежат в директории /data/ в корне проекта. Каждый файл в формате .json - для отдельного списка ключей.<br>
Например в таблице цен указать ключ {{ price.valuable }}, тогда в папке /data должен быть файл price.json, в котором есть нужный ключ и его значение:
```
{
  "cheap": "10eb(Дешевка)",
  "standard": "20eb(Обычное)",
  "valuable": "50eb(Ценное)",
  "premium": "100eb(Премиум)",
  "expensive": "500eb(Дорогое)",
  "very_expensive": "1000eb(Очень Дорогое)",
  "luxury": "50000eb(Роскошь)",
  "ultra_luxury": "10000eb и выше(Супер Роскошь)"
}
```
### Интерактивные элементы  

Пока реализовано всего 2 типа интерактивных элементов:  
1. Оглавление
2. Вкладки
В дальнейшем их может появится больше.

#### Оглавление
Если страница большая, в ней куча таблиц, разделов и заголовков, то логично использовать оглавление для быстрого перехода по страние. Переход будет работать только на заголовки!  
Пример оглавления со страницы weapons.md:
```
### Оглавление:

1. [Обобщённое оружие Ближнего и Дальнего боя](#обобщенное-оружие-ближнего-и-дальнего-боя)
    - [Оружие Дальнего Боя](#оружие-дальнего-боя)
    - [Оружие Ближнего Боя](#оружие-ближнего-боя)
2. [Оружие Дальнего Боя от известных производителей](#оружие-дальнего-боя-от-известных-производителей)
```
Где в [] - отображаемое имя, а в () - якорь заголовка, на который будет совершен переход, по клику.  
Букву Ё кстати в заголовке и якоре лучше не использовать:)  
Но также в приложении реализовано отображение интерактивной кнопки "Оглавление", которая появляется при скролле страницы вниз. По нажатии на нее появляется небольшое окошко с оглавлением данной страницы. Чтобы такая кнопка и список появились, нужно заключить блок "Оглавление" в `<div class="page-toc"></div>`. Тогда все, что находится внутри этого блока будет отображаться в попапе.  
Пример с той же страницей weapons.md:
```
<div class="page-toc">

### Оглавление:

1. [Обобщённое оружие Ближнего и Дальнего боя](#обобщенное-оружие-ближнего-и-дальнего-боя)
    - [Оружие Дальнего Боя](#оружие-дальнего-боя)
    - [Оружие Ближнего Боя](#оружие-ближнего-боя)
2. [Оружие Дальнего Боя от известных производителей](#оружие-дальнего-боя-от-известных-производителей)

</div>
```
#### Вкладки
Чтобы не писать полотна текста или впихивать таблички одну за другой, или не плодить дополнительные странички, куда убирать "доп.текст", реализована система "вкладок". Визуально отображаемые кнопки, по переключению которых пользвателю будет показываться разная информация. 
Для этого вначале нужно отобразить список этих вкладок и их названия просто написав такой блок:
```
<div class="tab-buttons">
  <button class="tab-button active" data-tab="pistol">Пистолеты и ПП</button>
  <button class="tab-button" data-tab="tactical">Тактическое</button>
  <button class="tab-button" data-tab="bows">Луки и Арбалеты</button>
  <button class="tab-button" data-tab="heavy">Оружие Крупного Калибра</button>
</div>
```
Здесь каждая строка типа `<button class="tab-button active" data-tab="TAB_ID">TAB_NAME</button>` - отдельная кнопка вкладки. Где `TAB_ID` - "айдишник" вкладки, а `TAB_NAME` отображаемое имя.<br>  **Важно:** ключ `active` должен быть только у одной вкладки, которая по дефолту активна, или его не должно быть ни у какой вкладки.<br>
Далее нужно наполнить каждую вкладку контентом в таких блоках:
```
<div class="tab-content active" id="TAB_ID">

КОНТЕНТ

</div>
```
Здесь нужно указать TAB_ID заполняемой вкладки. Ключ `active` работает также, как и выше. Должен быть либо у одной и той же вкладки, либо не быть вовсе (в таком случае по дефолту будут просто показаны кнопки без контента).
